-# file: app/views/courses/index.html.haml

%p#notice=notice

.row
  .col-xs-12
    %h1{class:"text-left"}="Course Overview "

.row
  .col-xs-6=link_to "New Course",new_course_path,class:"btn btn-primary"

%table#courses.table.table-striped{:class => "table table-hover"}
  %thead
    %tr
      %th Couse ID
      %th Course-Name 
      %th Credits
      %th Lecturer
      %th Description
      %th Edit
  %tbody
    - @courses.each do |course|
      %tr{:id => "accordion-parent-#{course.id}", :class => 'clickable', "data-toggle" => "collapse", "data-target" => "#accordion-#{course.id}"}
        %td= course.cid
        %td= course.name
        %td= course.credits
        %td= course.lecturer
        %td= course.description
        %td=link_to 'Edit', edit_course_path(course.id)
      %tr{:id => "accordion-#{course.id}", :class => 'collapse', "data-parent" => "accordion-parent-#{course.id}"}
        %td
        %td{:colspan => 5}
          %table#courses.table.table-striped
            %thead
              %tr
                %th TA Name
                %th Status
                %th Action 
              -if @courses_ta[course.id]
                -@courses_ta[course.id].each do |ta|
                  %tr
                    %td= ta.fullName()
                    %td
                      - case ta.status
                      - when 1
                        %span{class:"label label-default"}="Under Review"
                      - when 2
                        %span{class:"label label-primary"}="Position Assigned"
                      - when 3
                        %span{class:"label label-success"}="Confirmed"
                      - else
                        %span{class:"label label-danger"}="Unknown"
                    %td=link_to('Email', email_ta_notification_path(:id => course.id, :ta_id => ta.id)) +' / ' + link_to('Confirm', confirm_ta_path(:id => course.id, :ta_id => ta.id)) +' / ' +link_to('Delete', delete_ta_path(:id => course.id, :ta_id => ta.id))
              %tr
                %td{:colspan => 2}
                %td=link_to 'Assign new TA', select_new_ta_path(course.id)